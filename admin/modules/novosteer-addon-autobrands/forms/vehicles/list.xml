<form>
	<title>Vehicle</title>
	<border>true</border>

	<skin>Gray</skin>

	<fields>
		<_count header="No." width="20" align="right" suffix="."/>

		<vehicle_image type="image" path="./vehicles/stock/" header="Image" width="100">
			<file default="" field="vehicle_id" ext=".png" />			
		</vehicle_image>

		<vehicle_year header="Year"></vehicle_year>
		<brand_name header="Make"></brand_name>
		<model_name header="Model"></model_name>
		<trim_name header="Trim"></trim_name>
		<color_name header="Color"></color_name>

		<vehicle_default type="relation" align="center" width="100" header="Default">
			<options>
				<option name="1" color="green" value="yes" />
			</options>
		</vehicle_default>

		<button_delete type="button" width="44" align="center" onclick="" button="/small/delete" acl="models.delete">
			<location>{SELF.URI.DELETE}</location>
		</button_delete>

		<button_details type="button" width="44" align="center" onclick="" button="/small/edit" acl="models.edit">
			<location>{SELF.URI.EDIT}</location>
		</button_details>

	</fields>

	<header>
		<titles>true</titles>
		<buttons>
			<add button="addnew" acl="models.add">
				<location>{SELF.URI.ADD}</location>
			</add>
		</buttons>
	</header>

	<items>50</items>


	<sql>
		<vars>

			<table type="table"/>
			<table_brands type="table" import="plugin:novosteer_addon_autobrands_brands"/>
			<table_models type="table" import="plugin:novosteer_addon_autobrands_models"/>
			<table_trims type="table" import="plugin:novosteer_addon_autobrands_trims"/>
			<table_colors type="table" import="plugin:novosteer_addon_autobrands_colors"/>

			<page type="page"/>
			<items type="form" var="items"/>
			<lang_id type="eval" import="$_GET[lang_id];" />

			<condition type="var" import="" />

			<from type="var">
				<import>
					{TABLE} as vehicles
					INNER JOIN 
						{TABLE_MODELS} as models	
					ON 
						vehicles.model_id = models.model_id
					INNER JOIN 
						{TABLE_TRIMS} as trims
					ON 
						vehicles.trim_id = trims.trim_id
					INNER JOIN
						{TABLE_BRANDS} as brands
					ON 
						models.brand_id = brands.brand_id
					INNER JOIN 
						{TABLE_COLORS} as colors
					ON
						vehicles.color_id = colors.color_id					
				</import>
			</from>

			<order type="var" import="vehicle_year,brand_name,model_name" />
			<order_mode type="var" import="ASC" />

		</vars>
		<query>select * from {FROM} {CONDITION} ORDER BY {ORDER} {ORDER_MODE} LIMIT {PAGE} , {ITEMS} </query>
		<count table="{FROM} " condition="{CONDITION}" />

	</sql> 


</form>